{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\nconst LOCALSTORAGE_KEY = 'feedback-form-state';\nconst feedbackFormEl = document.querySelector('.feedback-form');\n\ninitForm();\n\nfunction onFeedbackForm(event) {\n  let persistedForm = localStorage.getItem(LOCALSTORAGE_KEY);\n  persistedForm = persistedForm ? JSON.parse(persistedForm) : {};\n  persistedForm[event.target.name] = event.target.value;\n  localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(persistedForm));\n}\n\nfeedbackFormEl.addEventListener('input', throttle(onFeedbackForm, 500));\n\nfeedbackFormEl.addEventListener('submit', onFeedbackFormSubmit);\n\nfunction onFeedbackFormSubmit(event) {\n  event.preventDefault();\n  const formElements = event.currentTarget.elements;\n  const email = formElements.email.value;\n  const message = formElements.message.value;\n  if (email === '' || message === '') {\n    return alert('Attention! All fields must be completed');\n  } else {\n    console.log('feedback-form-state', JSON.parse(localStorage.getItem(LOCALSTORAGE_KEY)));\n    localStorage.removeItem(LOCALSTORAGE_KEY);\n    event.currentTarget.reset();\n  }\n}\n\nfunction initForm() {\n  let persistedForm = localStorage.getItem(LOCALSTORAGE_KEY);\n  if (persistedForm) {\n    persistedForm = JSON.parse(persistedForm);\n    Object.entries(persistedForm).forEach(([name, value]) => {\n      feedbackFormEl.elements[name].value = value;\n    });\n  }\n};\n\n\n"],"names":["LOCALSTORAGE_KEY","feedbackFormEl","initForm","onFeedbackForm","event","persistedForm","throttle","onFeedbackFormSubmit","formElements","email","message","name","value"],"mappings":"wIAEA,MAAMA,EAAmB,sBACnBC,EAAiB,SAAS,cAAc,gBAAgB,EAE9DC,IAEA,SAASC,EAAeC,EAAO,CAC7B,IAAIC,EAAgB,aAAa,QAAQL,CAAgB,EACzDK,EAAgBA,EAAgB,KAAK,MAAMA,CAAa,EAAI,CAAA,EAC5DA,EAAcD,EAAM,OAAO,MAAQA,EAAM,OAAO,MAChD,aAAa,QAAQJ,EAAkB,KAAK,UAAUK,CAAa,CAAC,CACtE,CAEAJ,EAAe,iBAAiB,QAASK,EAASH,EAAgB,GAAG,CAAC,EAEtEF,EAAe,iBAAiB,SAAUM,CAAoB,EAE9D,SAASA,EAAqBH,EAAO,CACnCA,EAAM,eAAc,EACpB,MAAMI,EAAeJ,EAAM,cAAc,SACnCK,EAAQD,EAAa,MAAM,MAC3BE,EAAUF,EAAa,QAAQ,MACrC,GAAIC,IAAU,IAAMC,IAAY,GAC9B,OAAO,MAAM,yCAAyC,EAEtD,QAAQ,IAAI,sBAAuB,KAAK,MAAM,aAAa,QAAQV,CAAgB,CAAC,CAAC,EACrF,aAAa,WAAWA,CAAgB,EACxCI,EAAM,cAAc,OAExB,CAEA,SAASF,GAAW,CAClB,IAAIG,EAAgB,aAAa,QAAQL,CAAgB,EACrDK,IACFA,EAAgB,KAAK,MAAMA,CAAa,EACxC,OAAO,QAAQA,CAAa,EAAE,QAAQ,CAAC,CAACM,EAAMC,CAAK,IAAM,CACvDX,EAAe,SAASU,GAAM,MAAQC,CAC5C,CAAK,EAEL"}