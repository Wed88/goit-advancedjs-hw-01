{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-feedback.js"],"sourcesContent":["import throttle from 'lodash.throttle';\n\nconst LOCALSTORAGE_KEY = 'feedback-form-state';\nconst feedbackFormEl = document.querySelector('.feedback-form');\n\ninitForm();\n\nfeedbackFormEl.addEventListener('input', event => {\n  event.preventDefault;\n  const formData = new FormData(feedbackFormEl);\n});\n\nfunction onfeedbackForm(event) {\n  let persistedForm = localStorage.getItem(LOCALSTORAGE_KEY);\n  persistedForm = persistedForm ? JSON.parse(persistedForm) : {};\n  persistedForm[event.target.name] = event.target.value;\n  localStorage.setItem(LOCALSTORAGE_KEY, JSON.stringify(persistedForm));\n  console.log(persistedForm);\n}\n\nfeedbackFormEl.addEventListener('input', throttle(onfeedbackForm, 500));\n\nfeedbackFormEl.addEventListener('submit', () => {\n  console.log('feedback-form-state', JSON.parse(localStorage.getItem(LOCALSTORAGE_KEY)));\n  localStorage.removeItem(LOCALSTORAGE_KEY);\n});\n\nfunction initForm() {\n  let persistedForm = localStorage.getItem(LOCALSTORAGE_KEY);\n  if (persistedForm) {\n    persistedForm = JSON.parse(persistedForm);\n    Object.entries(persistedForm).forEach(([name, value]) => {\n      feedbackFormEl.elements[name].value = value;\n    });\n  }\n}\n"],"names":["LOCALSTORAGE_KEY","feedbackFormEl","initForm","event","onfeedbackForm","persistedForm","throttle","name","value"],"mappings":"mIAEA,MAAMA,EAAmB,sBACnBC,EAAiB,SAAS,cAAc,gBAAgB,EAE9DC,IAEAD,EAAe,iBAAiB,QAASE,GAAS,CAChDA,EAAM,eACW,IAAI,SAASF,CAAc,CAC9C,CAAC,EAED,SAASG,EAAeD,EAAO,CAC7B,IAAIE,EAAgB,aAAa,QAAQL,CAAgB,EACzDK,EAAgBA,EAAgB,KAAK,MAAMA,CAAa,EAAI,CAAA,EAC5DA,EAAcF,EAAM,OAAO,MAAQA,EAAM,OAAO,MAChD,aAAa,QAAQH,EAAkB,KAAK,UAAUK,CAAa,CAAC,EACpE,QAAQ,IAAIA,CAAa,CAC3B,CAEAJ,EAAe,iBAAiB,QAASK,EAASF,EAAgB,GAAG,CAAC,EAEtEH,EAAe,iBAAiB,SAAU,IAAM,CAC9C,QAAQ,IAAI,sBAAuB,KAAK,MAAM,aAAa,QAAQD,CAAgB,CAAC,CAAC,EACrF,aAAa,WAAWA,CAAgB,CAC1C,CAAC,EAED,SAASE,GAAW,CAClB,IAAIG,EAAgB,aAAa,QAAQL,CAAgB,EACrDK,IACFA,EAAgB,KAAK,MAAMA,CAAa,EACxC,OAAO,QAAQA,CAAa,EAAE,QAAQ,CAAC,CAACE,EAAMC,CAAK,IAAM,CACvDP,EAAe,SAASM,GAAM,MAAQC,CAC5C,CAAK,EAEL"}